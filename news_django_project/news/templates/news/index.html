{% extends 'news/base.html' %}

{% block title %}Главная - Новости{% endblock %}

{% block content %}
    <div class="search-box">
        <form method="GET" action="">
            <input
                type="text"
                name="search"
                class="search-input"
                placeholder="Поиск по заголовку..."
                value="{{ search_query|default:'' }}"
            >
            <button type="submit" class="search-btn">Найти</button>
            {% if search_query %}
                <a href="{% url 'home' %}">Сбросить</a>
            {% endif %}
        </form>
    </div>

    <h2>Последние новости</h2>

    {% if articles %}
        {% for article in articles %}
            <div class="news-item">
                <h3 class="news-title">
                    <a href="{% url 'article_detail' article.id %}">{{ article.title }}</a>
                </h3>
                <p>{{ article.content|truncatewords:30 }}</p>
                <div style="color: #666; font-size: 14px; margin-top: 10px;">
                    Автор: {{ article.author.username }} | Дата: {{ article.created_at|date:"d.m.Y" }}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="news-item">
            <p>Новостей пока нет.</p>
            {% if search_query %}
                <p>По запросу "{{ search_query }}" ничего не найдено.</p>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}